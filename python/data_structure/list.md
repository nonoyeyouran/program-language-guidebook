# Python 列表（List）常用操作

列表（`list`）是 Python 中最常用的数据结构之一，用于存储有序的元素集合。列表是可变的，支持动态增删改查操作。以下是列表的常用操作。
## Python 中元组 (`tuple`) 和列表 (`list`) 的区别

| 特性                | 元组 (`tuple`)                                                                 | 列表 (`list`)                                                                 |
|---------------------|-------------------------------------------------------------------------------|-------------------------------------------------------------------------------|
| **定义**            | 使用圆括号 `()` 定义，例如 `(1, 2, 3)`。                                       | 使用方括号 `[]` 定义，例如 `[1, 2, 3]`。                                       |
| **可变性**          | **不可变**，创建后不能修改、添加或删除元素。                                   | **可变**，可以修改、添加或删除元素。                                           |
| **性能**            | 由于不可变性，元组的操作速度更快，占用内存更少。                               | 由于可变性，列表的操作速度稍慢，占用内存较多。                                 |
| **适用场景**        | 适用于存储不可变的数据，如常量、配置项或作为字典的键。                         | 适用于需要频繁修改的数据集合。                                                 |
| **方法支持**        | 支持的方法较少，主要是 `count()` 和 `index()`。                                | 支持丰富的方法，如 `append()`、`extend()`、`insert()`、`remove()`、`pop()` 等。 |
| **内存占用**        | 内存占用较少，因为元组是不可变的，Python 会进行优化。                          | 内存占用较多，因为列表需要支持动态修改。                                       |
| **安全性**          | 更安全，因为数据不可变，适合存储不希望被修改的数据。                           | 安全性较低，数据可以被随意修改。                                               |
| **哈希性**          | 如果元组的所有元素都是不可变的，则元组是可哈希的，可以作为字典的键或集合的元素。 | 列表不可哈希，不能作为字典的键或集合的元素。                                   |
| **示例**            | `my_tuple = (1, 2, 3)`                                                        | `my_list = [1, 2, 3]`                                                         |
| **修改元素**        | 不支持，尝试修改会抛出 `TypeError`。                                           | 支持，例如 `my_list[0] = 10`。                                                |
| **添加元素**        | 不支持，需要创建新的元组。                                                     | 支持，例如 `my_list.append(4)`。                                               |
| **删除元素**        | 不支持，需要创建新的元组。                                                     | 支持，例如 `my_list.remove(2)`。                                               |
| **解包操作**        | 支持，例如 `a, b, c = my_tuple`。                                              | 支持，例如 `a, b, c = my_list`。                                               |
| **嵌套结构**        | 可以嵌套，例如 `nested_tuple = ((1, 2), (3, 4))`。                             | 可以嵌套，例如 `nested_list = [[1, 2], [3, 4]]`。                              |
| **转换为其他类型**  | 可以使用 `list()` 将元组转换为列表。                                           | 可以使用 `tuple()` 将列表转换为元组。                                          |

---

## 总结
- **元组**：不可变，性能更高，适合存储不需要修改的数据。
- **列表**：可变，功能更丰富，适合需要动态修改的数据集合。

---

## 1. 创建列表

### 1.1 直接创建
使用方括号 `[]` 创建列表。

### 1.2 使用 `list()` 函数
将其他可迭代对象（如元组、字符串）转换为列表。
```
my_list = [1, 2, 3, 4, 5]

my_list = list((1, 2, 3))  # 元组转列表
char_list = list("Python")  # 字符串转列表
```
---

## 2. 访问列表元素

### 2.1 通过索引访问
列表的索引从 `0` 开始，支持负数索引（从末尾开始）。

### 2.2 切片操作
使用切片获取子列表，语法为 `[start:end:step]`。
```
my_list = [10, 20, 30, 40, 50]
print(my_list[0])   # 输出: 10
print(my_list[-1])  # 输出: 50

my_list = [1, 2, 3, 4, 5]
print(my_list[1:4])  # 输出: [2, 3, 4]
print(my_list[::2])  # 输出: [1, 3, 5]
```
---

## 3. 修改列表

### 3.1 修改单个元素
通过索引直接修改元素。
```
my_list = [1, 2, 3]
my_list[1] = 20  # 修改第二个元素
print(my_list)   # 输出: [1, 20, 3]
```
### 3.2 修改多个元素
通过切片修改多个元素。
```
my_list = [1, 2, 3, 4, 5]
my_list[1:3] = [20, 30]  # 修改第二和第三个元素
print(my_list)           # 输出: [1, 20, 30, 4, 5]
```
---

## 4. 添加元素

### 4.1 使用 `append()` 方法
在列表末尾添加单个元素。
```
my_list = [1, 2, 3]
my_list.append(4)
print(my_list)  # 输出: [1, 2, 3, 4]
```
### 4.2 使用 `extend()` 方法
在列表末尾添加多个元素（将可迭代对象的元素逐个添加）。
```
my_list = [1, 2, 3]
my_list.extend([4, 5])
print(my_list)  # 输出: [1, 2, 3, 4, 5]
```
### 4.3 使用 `insert()` 方法
在指定位置插入元素。
```
my_list = [1, 2, 3]
my_list.insert(1, 10)  # 在索引 1 处插入 10
print(my_list)         # 输出: [1, 10, 2, 3]
```
---

## 5. 删除元素

### 5.1 使用 `remove()` 方法
删除列表中第一个匹配的元素。
```
my_list = [1, 2, 3, 2]
my_list.remove(2)  # 删除第一个 2
print(my_list)     # 输出: [1, 3, 2]
```
### 5.2 使用 `pop()` 方法
删除并返回指定索引的元素（默认删除最后一个元素）。
```
my_list = [1, 2, 3]
popped_element = my_list.pop(1)  # 删除索引 1 的元素
print(my_list)                   # 输出: [1, 3]
print(popped_element)            # 输出: 2
```
### 5.3 使用 `del` 语句
删除指定索引或切片范围的元素。
```
my_list = [1, 2, 3, 4, 5]
del my_list[1]      # 删除索引 1 的元素
del my_list[1:3]    # 删除索引 1 到 2 的元素
print(my_list)      # 输出: [1, 5]
```
### 5.4 使用 `clear()` 方法
清空列表中的所有元素。
```
my_list = [1, 2, 3]
my_list.clear()
print(my_list)  # 输出: []
```
---

## 6. 列表排序与反转

### 6.1 使用 `sort()` 方法
对列表进行原地排序（默认升序）。
```
my_list = [3, 1, 4, 1, 5, 9]
my_list.sort()  # 升序排序
print(my_list)  # 输出: [1, 1, 3, 4, 5, 9]
```
### 6.2 使用 `sorted()` 函数
返回一个新的排序列表，原列表不变。
```
my_list = [3, 1, 4, 1, 5, 9]
new_list = sorted(my_list)  # 升序排序
print(new_list)             # 输出: [1, 1, 3, 4, 5, 9]
```
### 6.3 使用 `reverse()` 方法
反转列表中的元素顺序。
```
my_list = [1, 2, 3]
my_list.reverse()
print(my_list)  # 输出: [3, 2, 1]
```
---

## 7. 列表查找与统计

### 7.1 使用 `index()` 方法
返回第一个匹配元素的索引。
```
my_list = [1, 2, 3, 2]
index = my_list.index(2)  # 查找元素 2 的索引
print(index)              # 输出: 1
```
### 7.2 使用 `count()` 方法
返回指定元素在列表中出现的次数。
```
my_list = [1, 2, 3, 2]
count = my_list.count(2)  # 统计元素 2 的出现次数
print(count)              # 输出: 2
```
---

## 8. 列表复制

### 8.1 浅拷贝
使用切片或 `copy()` 方法创建列表的浅拷贝。
```
my_list = [1, 2, 3]
new_list = my_list[:]      # 使用切片
new_list = my_list.copy()  # 使用 copy() 方法

import copy

original = [[1, 2], [3, 4]]
shallow_copy = copy.copy(original)

# 修改嵌套对象
shallow_copy[0][0] = 10

print(original)      # 输出: [[10, 2], [3, 4]]
print(shallow_copy)  # 输出: [[10, 2], [3, 4]]
```
### 8.2 深拷贝
使用 `copy.deepcopy()` 创建列表的深拷贝（适用于嵌套列表）。
```
import copy

original = [[1, 2], [3, 4]]
deep_copy = copy.deepcopy(original)

# 修改嵌套对象
deep_copy[0][0] = 10

print(original)    # 输出: [[1, 2], [3, 4]]
print(deep_copy)   # 输出: [[10, 2], [3, 4]]
```
### 8.3 浅拷贝 vs 深拷贝的区别

| 特性                | 浅拷贝                              | 深拷贝                              |
|---------------------|-------------------------------------|-------------------------------------|
| **复制层次**         | 只复制最外层结构                    | 递归复制所有层次结构                |
| **嵌套对象**         | 嵌套对象是原对象的引用              | 嵌套对象是全新的独立副本            |
| **修改嵌套对象的影响** | 修改嵌套对象会影响原列表            | 修改嵌套对象不会影响原列表          |
| **性能**             | 较快，只复制一层                   | 较慢，递归复制所有层次              |
| **适用场景**         | 列表中没有嵌套的可变对象时使用      | 列表中有嵌套的可变对象时使用        |

---

## 9.1 列表推导式
列表推导式是一种简洁的创建列表的方式。
```
# 创建一个包含 1 到 10 的平方的列表
squares = [x**2 for x in range(1, 11)]
print(squares)  # 输出: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
```

## 9.2 列表生成式
列表生成式通常指的是使用生成器表达式（Generator Expression）来生成一个迭代器，而不是直接生成一个列表。  
```
generator = (expression for item in iterable if condition)
```
| 特点               | 列表推导式                     | 列表生成式                     |
|-------------------|-------------------------------|-------------------------------|
| 语法              | 使用方括号 `[]`               | 使用圆括号 `()`               |
| 立即生成          | 生成整个列表                   | 生成迭代器，惰性求值           |
| 内存使用          | 占用更多内存                   | 占用较少内存                   |
| 适用场景          | 需要立即使用列表时             | 处理大数据集，节省内存时       |

---

## 10. 列表常用函数

### 10.1 `len()`
返回列表的长度。

### 10.2 `min()` 和 `max()`
返回列表中的最小值和最大值。

### 10.3 `sum()`
返回列表中所有元素的和。
```
my_list = [1, 2, 3]
print(len(my_list))  # 输出: 3

my_list = [1, 2, 3]
print(min(my_list))  # 输出: 1
print(max(my_list))  # 输出: 3

my_list = [1, 2, 3]
print(sum(my_list))  # 输出: 6
```
---

## 总结
Python 的列表提供了丰富的操作方法，包括增删改查、排序、查找、复制等。掌握这些操作可以高效地处理列表数据，满足各种编程需求。
